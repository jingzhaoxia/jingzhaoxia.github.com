<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>用户注册和登录</title>
<link type="text/css" rel="stylesheet" href="style/common.css">
<script src="js/ajax.js"></script>
<script>
window.onload=function(){
	//用户注册
	;(function(){
		var oUser=document.getElementById('add_user');	
		var oPass=document.getElementById('add_pass');
		var oBtn=document.getElementById('add_btn');
		
		oBtn.onclick=function(){
			//注册
			ajax({
				url:'user.php',
				data:{
					act:'add',
					user:encodeURIComponent(oUser.value),
					pass:encodeURIComponent(oPass.value)	
				},
				success:function(str){
					var json=eval('('+str+')');
					if(json.error){
						alert('注册失败了:'+json.desc);
					}else{
						alert('注册成功了');
					}
				}	
			});	
		};
	})();	
	
	//用户登陆
	;(function(){
		var oUser=document.getElementById('login_user');	
		var oPass=document.getElementById('login_pass');
		var oBtn=document.getElementById('login_btn');
		
		oBtn.onclick=function(){
			ajax({
				url:'user.php',
				data:{
					act:'login',
					user:encodeURIComponent(oUser.value),
					pass:encodeURIComponent(oPass.value)	
				},
				success:function(str){
					var json=eval('('+str+')');
					if(json.error){
						alert('登陆失败了:'+json.desc);
					}else{
						alert('登陆成功了');
					}
				}	
			});	
		};
	})();
};
</script>
</head>

<body>
<!--登陆-->
<div class="loginBox">
	<ul class="loginList clearfix">
    	<li class="hTxt">用户注册</li>
        <li class="inputBox">
        	<input type="text" class="inputs" id="add_user">
        </li>
        <li class="inputBox">
        	<input type="password" class="inputs" id="add_pass">
        </li>
        <li class="btns">
            <input id="add_btn" type="button" class="reg" value="" />
        </li>
        <li class="look"><a href="user_view.php" target="_blank">查看已注册用户</a></li>
    </ul>
</div>
<!--注册-->
<div class="loginBox">
	<ul class="loginList clearfix">
    	<li class="hTxt">用户登陆</li>
        <li class="inputBox">
        	<input type="text" class="inputs" id="login_user">
        </li>
        <li class="inputBox">
        	<input type="password" class="inputs" id="login_pass">
        </li>
        <li class="btns">
            <input id="login_btn" type="button" class="login" value="" />
        </li>
    </ul>
</div>
</body>
</html>
